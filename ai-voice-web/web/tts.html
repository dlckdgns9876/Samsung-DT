<!doctype html>
<html lang="ko">

<head>
    <meta charset="utf-8" />
    <title>AI Voice TTS Demo</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style>
        :root {
            --brand: #2563eb;
            --line: #e5e7eb;
            --text: #111827;
            --muted: #6b7280;
            --bg: #fff;
            --card: #fff;
            --radius: 14px;
            --shadow: 0 8px 24px rgba(0, 0, 0, .06);
            --max: 1300px;
        }

        * {
            box-sizing: border-box
        }

        /* ë§í¬ ë¦¬ì…‹ + ë„¤ë¹„ ìƒ‰ìƒ/í™œì„±í™” */
        a,
        a:visited {
            color: inherit;
            text-decoration: none;
        }

        .nav {
            display: flex;
            gap: 16px;
            color: #4b5563;
        }

        .nav a.active {
            color: var(--brand);
            font-weight: 600;
        }


        body {
            margin: 0;
            background: var(--bg);
            color: var(--text);
            font: 14px/1.45 system-ui, -apple-system, 'Segoe UI', Roboto, 'Noto Sans KR', sans-serif
        }

        /* ===== ê³µí†µ í—¤ë” ===== */
        .header {
            position: sticky;
            top: 0;
            z-index: 50;
            background: rgba(255, 255, 255, .85);
            backdrop-filter: saturate(180%) blur(10px);
            border-bottom: 1px solid var(--line)
        }

        .header-inner {
            height: 56px;
            display: flex;
            gap: 20px;
            align-items: center
        }

        .brand {
            font-weight: 800;
            font-size: 18px
        }

        .nav {
            display: flex;
            gap: 16px;
            color: #4b5563
        }

        .nav a.active {
            color: var(--brand);
            font-weight: 600
        }

        .auth {
            margin-left: auto;
            display: flex;
            gap: 12px;
            color: #374151
        }

        .container {
            max-width: var(--max);
            margin: 28px auto;
            padding: 0 16px
        }

        h1 {
            margin: 0 0 12px;
            font-size: 18px
        }

        .grid {
            display: grid;
            gap: 16px
        }

        /* desktop: ë…¹ìŒ ìŠ¤í¬ë¦½íŠ¸(ì™¼ìª½) | TTS(ê°€ìš´ë°) | ë™í™” ì„ íƒ(ì˜¤ë¥¸ìª½) */
        @media (min-width:1180px) {
            .grid {
                grid-template-columns: 340px 1fr 360px
            }
        }

        @media (min-width:930px) and (max-width:1179px) {
            .grid {
                grid-template-columns: 320px 1fr
            }

            .col-right {
                grid-column: 1 / -1
            }
        }

        .card {
            background: var(--card);
            border: 1px solid var(--line);
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            padding: 16px
        }

        label {
            display: block;
            margin: 10px 0 6px;
            color: #374151;
            font-weight: 600
        }

        select,
        input,
        textarea {
            width: 100%;
            border: 1px solid var(--line);
            border-radius: 10px;
            padding: 10px;
            background: #fff
        }

        textarea {
            min-height: 110px;
            resize: vertical
        }

        .row {
            display: flex;
            gap: 8px;
            align-items: center
        }

        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            border: 1px solid var(--line);
            padding: 10px 14px;
            border-radius: 10px;
            background: #f9fafb;
            cursor: pointer
        }

        .btn.primary {
            background: var(--brand);
            border-color: transparent;
            color: #fff
        }

        .muted {
            color: var(--muted)
        }

        .player {
            width: 100%
        }

        .json {
            white-space: pre-wrap;
            background: #f8fafc;
            border: 1px solid var(--line);
            padding: 12px;
            border-radius: 10px;
            color: #374151
        }

        .seg {
            display: flex;
            gap: 6px;
            margin-bottom: 10px;
            flex-wrap: wrap
        }

        .seg button {
            padding: 6px 10px;
            border-radius: 999px;
            border: 1px solid var(--line);
            background: #fff;
            cursor: pointer
        }

        .seg button.active {
            background: #eef2ff;
            border-color: #c7d2fe;
            color: #1d4ed8
        }

        .box {
            border: 1px solid var(--line);
            border-radius: 10px;
            padding: 12px;
            background: #fff;
            white-space: pre-wrap;
            line-height: 1.6;
            max-height: 420px;
            overflow: auto
        }

        .actions {
            display: flex;
            gap: 8px;
            justify-content: flex-end;
            margin-top: 10px
        }

        .list {
            display: grid;
            gap: 8px;
            margin-top: 8px
        }

        .pill {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            border: 1px solid var(--line);
            border-radius: 999px;
            padding: 6px 10px;
            background: #fff;
            cursor: pointer
        }

        .pill.active {
            background: #eef2ff;
            border-color: #c7d2fe;
            color: #1d4ed8
        }

        .story-head {
            display: flex;
            gap: 8px;
            justify-content: space-between;
            align-items: center
        }
    </style>
</head>

<body>

    <!-- ===== ê³µí†µ ë„¤ë¹„ê²Œì´ì…˜ í—¤ë” ===== -->
    <header class="header">
        <div class="container header-inner">
            <a class="brand" href="/">ì´ˆë³´ ìœ¡ì•„ ì›¹</a>
            <nav class="nav">
                <a href="/" data-page="home" data-nav="primary">í™ˆ</a>
                <a href="/tts" data-page="tts" data-nav="primary">ë™í™”</a>

                <!-- í™ˆ ë‚´ë¶€ ì„¹ì…˜ì€ ì•µì»¤ë§Œ ìœ ì§€ -->
                <a href="/#behaviors">í–‰ë™ì‚¬ì „</a>
                <a href="/#routines">ë£¨í‹´</a>

                <a href="/growth" data-page="growth" data-nav="primary">ì„±ì¥/ê±´ê°•</a>
                <a href="/#community">ì»¤ë®¤ë‹ˆí‹°</a>
            </nav>
        </div>
    </header>


    <!-- ===== ë³¸ë¬¸ ===== -->
    <main class="container">
        <div class="row" style="justify-content:space-between;gap:8px;margin-bottom:8px">
            <h1>AI Voice TTS Demo <span class="muted" style="font-weight:400">/ KSS Â· XTTS</span></h1>
        </div>

        <div class="grid">
            <!-- LEFT: ë…¹ìŒ ìŠ¤í¬ë¦½íŠ¸ íŒ¨ë„ -->
            <aside class="card col-left">
                <h3 style="margin:0 0 6px">ğŸ™ï¸ ë…¹ìŒ ìŠ¤í¬ë¦½íŠ¸</h3>
                <div class="muted" style="margin-bottom:10px">ë™í™” í†¤ìœ¼ë¡œ 30/60/90ì´ˆ ë²„ì „ì„ ì„ íƒí•´ ê·¸ëŒ€ë¡œ ì½ì–´ ì£¼ì„¸ìš”.</div>
                <div class="seg">
                    <button data-k="s30" class="active">30ì´ˆ</button>
                    <button data-k="s60">60ì´ˆ</button>
                    <button data-k="s90">90ì´ˆ</button>
                </div>
                <div id="scriptBox" class="box"></div>
                <div class="actions"><button id="btnScriptCopy" class="btn">ë³µì‚¬</button></div>
                <details style="margin-top:12px">
                    <summary class="muted">ë…¹ìŒ íŒ</summary>
                    <ul class="muted" style="margin:8px 0 0 18px">
                        <li>ì¡°ìš©í•œ ë°©, ì…â€“ë§ˆì´í¬ 15~20cm, ì‚´ì§ ì¸¡ë©´ìœ¼ë¡œ ë§í•˜ê¸°(íŒŒì—´ìŒ ë°©ì§€)</li>
                        <li>ì†ë„ëŠ” ëŠê¸‹í•˜ê²Œ, ì‰¼í‘œÂ·ë§ˆì¹¨í‘œë§ˆë‹¤ ì ê¹ ë©ˆì¶”ê¸°</li>
                        <li>í•œ ê°€ì§€ í†¤ìœ¼ë¡œ ì¼ê´€ë˜ê²Œ / í•œêµ­ì–´ë§Œ í¬í•¨</li>
                    </ul>
                </details>
            </aside>

            <!-- CENTER: í•©ì„±/ì—…ë¡œë“œ -->
            <main class="card col-center">
                <div class="row" style="gap:12px;flex-wrap:wrap">
                    <div style="flex:1 1 220px">
                        <label for="engine">ì—”ì§„</label>
                        <select id="engine">
                            <option value="xtts" selected>xtts (ë‹¤êµ­ì–´, ë³´ì´ìŠ¤ í”„ë¡œí•„ í•„ìš”)</option>
                            <option value="kss" disabled>kss (ë‹¨ì¼ í™”ì, í”„ë¡œí•„ ë¶ˆí•„ìš”) â€“ ë¹„í™œì„±</option>
                        </select>
                    </div>
                    <div style="flex:1 1 220px">
                        <label for="language">ì–¸ì–´</label>
                        <select id="language">
                            <option value="ko" selected>ko (Korean)</option>
                            <option value="en">en (English)</option>
                        </select>
                    </div>
                </div>

                <label for="userId">userid (XTTS ì „ìš©)</label>
                <input id="userId" placeholder="ì˜ˆ: user1" />
                <p class="muted" style="margin:8px 0 0">XTTSëŠ” ë¨¼ì € ì•„ë˜ì—ì„œ ë³´ì´ìŠ¤ í”„ë¡œí•„(.wav)ì„ ì—…ë¡œë“œí•´ì•¼ í•©ë‹ˆë‹¤.</p>

                <label for="text" style="margin-top:12px">í…ìŠ¤íŠ¸</label>
                <textarea id="text" placeholder="ì˜ˆ) ì˜¤ëŠ˜ì€ ì–´ë–¤ ëª¨í—˜ì„ ë– ë‚˜ ë³¼ê¹Œìš”?"></textarea>

                <div class="row" style="margin-top:12px">
                    <button id="btnSynth" class="btn primary" style="flex:1">í•©ì„±í•˜ê¸°</button>
                    <button id="btnClear" class="btn">ì´ˆê¸°í™”</button>
                </div>

                <audio id="player" class="player" controls style="margin-top:12px"></audio>
                <div id="resp" class="json" style="margin-top:12px;display:none"></div>

                <hr style="margin:18px 0;border:none;border-top:1px solid var(--line)" />

                <h3 style="margin:0 0 8px">ë³´ì´ìŠ¤ í”„ë¡œí•„ ì—…ë¡œë“œ (XTTSìš©)</h3>
                <div class="row" style="gap:12px;flex-wrap:wrap">
                    <div style="flex:1 1 220px">
                        <label for="upUser">userid</label>
                        <input id="upUser" placeholder="ì˜ˆ: user1" />
                    </div>
                    <div style="flex:1 1 220px">
                        <label for="upFile">speaker wav</label>
                        <input id="upFile" type="file" accept=".wav,.mp3,.m4a,.aac,.flac,.ogg" />
                    </div>
                </div>
                <button id="btnUpload" class="btn primary" style="margin-top:10px">í”„ë¡œí•„ ì—…ë¡œë“œ</button>
                <div id="upMsg" class="muted" style="margin-top:8px"></div>
            </main>

            <!-- RIGHT: í…Œë§ˆë³„ ë™í™” ì„ íƒ -->
            <aside class="card col-right">
                <div class="story-head">
                    <h3 style="margin:0">ğŸ“š í…Œë§ˆë³„ ë™í™”</h3>
                    <span class="muted" style="font-size:12px">ì›ë³¸ ì°½ì‘ Â· ììœ  ì´ìš©</span>
                </div>

                <div class="seg" id="themeChips" style="margin-top:8px"></div>
                <div id="storyList" class="list"></div>

                <div style="margin-top:12px">
                    <div class="row" style="justify-content:space-between;align-items:center">
                        <strong id="storyTitle">ì„ íƒí•œ ë™í™”</strong>
                        <div class="row" style="gap:6px">
                            <button id="btnStoryInsert" class="btn">í…ìŠ¤íŠ¸ ìƒìì— ë„£ê¸°</button>
                        </div>
                    </div>
                    <div id="storyBox" class="box" style="margin-top:8px;min-height:140px"></div>
                </div>
            </aside>
        </div>
    </main>

    <script>
        // ===== ë…¹ìŒ ìŠ¤í¬ë¦½íŠ¸ =====
        const SCRIPTS = {
            s30: `ì˜¤ëŠ˜ ë°¤, ì‘ì€ ë³„ í•˜ë‚˜ê°€ ì°½ê°€ì— ë¹„ì¹©ë‹ˆë‹¤.
ë‚˜ëŠ” ì¡°ìš©íˆ ì†ì‚­ì—¬ìš”. â€œì˜ ì, ì•„ê°€.â€
êµ¬ë¦„ì€ ì‚´ë‘ì‚´ë‘, ë°”ëŒì€ ì‚´ì§ ì§€ë‚˜ê°€ìš”.
í† ë¼ëŠ” â€œê¹¡ì´!â€, ê³ ì–‘ì´ëŠ” â€œëƒì˜¹.â€ ì¸ì‚¬í•˜ê³ ,
ì•„ê°€ëŠ” í¬ê·¼í•œ ì´ë¶ˆ ì†ì—ì„œ ëˆˆì„ ê°ìŠµë‹ˆë‹¤.
â€œë‚´ì¼ë„ í•¨ê»˜ ë†€ì.â€ ì˜¤ëŠ˜ ë°¤ë„ í‰ì•ˆíˆ, ê¿ˆë‚˜ë¼ë¡œ ê°€ìš”.`,
            s60: `í•´ê°€ ì§€ê³  ì§‘ì´ ì¡°ìš©í•´ì§€ë©´, ì‘ì€ ë“±ë¶ˆì´ ë°©ì„ ë°í™ë‹ˆë‹¤.
ë‚˜ëŠ” ë¶€ë“œëŸ½ê²Œ ë§í•´ìš”. â€œì˜¤ëŠ˜ í•˜ë£¨ë„ ì •ë§ ì˜í–ˆì–´.â€
ì°½ë°–ì—ëŠ” ë°”ëŒì´ ë‚˜ë­‡ìì„ ì‚´ì‚´ ê±´ë“œë¦¬ê³ , ì‹œê³„ëŠ” â€œë˜‘ë”±, ë˜‘ë”±â€ ì‹œê°„ì„ ì„¸ì£ .
ê³°ëŒì´ëŠ” ë² ê°œë¥¼ ê¼­ ëŒì–´ì•ˆê³ , í† ë¼ëŠ” ê·€ë¥¼ ë§ì•„ ëˆ•ìŠµë‹ˆë‹¤.
â€œë¬´ì—‡ì„ ê¿ˆê¿€ê¹Œ?â€ ë°˜ì§ë°˜ì§ ë³„ë“¤ì´ ì†ì‚­ì—¬ìš”.
ì•„ê°€ëŠ” í¬ê²Œ í•œë²ˆ í•˜í’ˆì„ í•˜ê³ , ì‘ê²Œ ì›ƒìœ¼ë©° ëˆˆì„ ê°ìŠµë‹ˆë‹¤.
â€œì‚¬ë‘í•´.â€ ì˜¤ëŠ˜ì˜ ë”°ëœ»í•¨ì„ ì´ë¶ˆ ì†ì— ë‹´ê³ , ì²œì²œíˆ ê¿ˆë‚˜ë¼ë¡œ ë– ë‚˜ìš”.`,
            s90: `í•´ê°€ ì„œìª½ í•˜ëŠ˜ ì•„ë˜ë¡œ ì‚´ë©°ì‹œ ìˆ¨ì–´ë“¤ë©´,
ìš°ë¦¬ ë°©ì—ëŠ” í¬ê·¼í•œ ë°¤ê³µê¸°ê°€ ë‚´ë ¤ì™€ìš”.
ë‚˜ëŠ” ì¡°ìš©íˆ ë¬¼ì–´ë´…ë‹ˆë‹¤. â€œì˜¤ëŠ˜ì€ ì–´ë–¤ ì´ì•¼ê¸°ë¥¼ ë“¤ë ¤ì¤„ê¹Œ?â€
ì°½ë¬¸ ë„ˆë¨¸, ë¶€ë“œëŸ¬ìš´ ë°”ëŒì´ ì»¤íŠ¼ì„ ì‚´ì§ ë°€ê³ ,
ë³„ë¹›ì€ â€œë°˜ì§â€ ëˆˆì„ ê¹œë°•ì´ë©° ì¸ì‚¬í•˜ì£ .
ê³°ëŒì´, í† ë¼, ê¸°ë¦°, ê³ ì–‘ì´ ì¹œêµ¬ë“¤ì€ ì°¨ë¡€ì°¨ë¡€ ì†ì‚­ì—¬ìš”.
â€œì˜ ìë¼, ì•„ê°€!â€ â€œë‚´ì¼ ë˜ ë§Œë‚˜!â€ â€œê¿ˆì—ì„œ í•¨ê»˜ ë†€ì!â€
ì‹œê³„ëŠ” â€œë˜‘ë”±, ë˜‘ë”±â€, ë§ˆìŒì€ â€œì½©ë‹¥, ì½©ë‹¥â€,
ë°œìêµ­ ì†Œë¦¬ëŠ” ì‚¬ë¼ì§€ê³ , ì´ë¶ˆ ì† ì˜¨ê¸°ëŠ” ì ì  ë” ë”°ëœ»í•´ì ¸ìš”.
ë‚˜ëŠ” ë¶€ë“œëŸ½ê²Œ ë§í•´ìš”. â€œê¹Šê²Œ ìˆ¨ ì‰¬ê³ , í¸ì•ˆíˆ ëˆˆì„ ê°ì•„ ë³¼ê¹Œ?â€
ì˜¤ëŠ˜ì˜ ì›ƒìŒ, ê³ ë§ˆì›€, ì‘ì€ ëª¨í—˜ì„ ì²œì²œíˆ ë– ì˜¬ë¦¬ë©°,
â€œì‚¬ë‘í•´.â€ í•œë§ˆë””ë¥¼ ì‚´ë©°ì‹œ ê±´ë„¤ìš”.
ì´ì œ ì•„ê°€ëŠ” ê³ ìš´ ê¿ˆì˜ ìˆ²ìœ¼ë¡œ, ë³„ë“¤ì˜ ê¸¸ì„ ë”°ë¼ ì²œì²œíˆ ê±¸ì–´ê°‘ë‹ˆë‹¤.
ë°¤ìƒˆ í¬ê·¼í•˜ê²Œ ì‰¬ê³ , ë‚´ì¼ ì•„ì¹¨ í™˜í•˜ê²Œ ì›ƒì–´ ë³´ì. ì˜ ììš”.`
        };
        const scriptBox = document.getElementById('scriptBox');
        const segBtns = [...document.querySelectorAll('.seg button')].filter(b => b.dataset.k);
        const btnScriptCopy = document.getElementById('btnScriptCopy');
        const textArea = document.getElementById('text');
        function setScript(key) { segBtns.forEach(b => b.classList.toggle('active', b.dataset.k === key)); scriptBox.textContent = SCRIPTS[key]; }
        segBtns.forEach(b => b.addEventListener('click', () => setScript(b.dataset.k))); setScript('s30');
        btnScriptCopy.onclick = async () => { await navigator.clipboard.writeText(scriptBox.textContent); btnScriptCopy.textContent = 'ë³µì‚¬ë¨!'; setTimeout(() => btnScriptCopy.textContent = 'ë³µì‚¬', 1200); };

        // ===== í…Œë§ˆë³„ ë™í™” =====
        const STORIES = [{
            id: 'star_blanket', title: 'ë³„ ì´ë¶ˆ', theme: 'ì ìë¦¬', text: `ë°¤í•˜ëŠ˜ì´ ì¡°ìš©í•´ì§ˆ ë•Œ, ì‘ì€ ë³„ë“¤ì´ ì•„ê°€ì—ê²Œ ì‚´ì§ ë‹¤ê°€ì™”ì–´ìš”.
â€œì¶”ìš¸ê¹Œ?â€ ë°˜ì§ë°˜ì§, ë³„ë“¤ì´ ë¹›ìœ¼ë¡œ ì´ë¶ˆì„ ì§â€” í¼ì³¤ì§€ìš”.
ë‹¬ë‹˜ì´ ë‘¥ê¸€ê²Œ ì›ƒìœ¼ë©° ë§í•´ìš”. â€œí¬ê·¼í¬ê·¼, ê¿ˆë‚˜ë¼ ì¤€ë¹„!â€
ë°”ëŒì€ ì‚´ì‚´, ì»¤íŠ¼ì€ ì‚´ì§, ë°©ì•ˆì€ ë”°ëœ»í•´ì¡Œì–´ìš”.
ì•„ê°€ëŠ” ì´ë¶ˆì„ ê»´ì•ˆê³  ì†ì‚­ì—¬ìš”. â€œê³ ë§ˆì›Œ, ë³„ ì¹œêµ¬ë“¤.â€
ë°˜ì§, ë°˜ì§. ì˜¤ëŠ˜ì˜ ê¸°ì¨ì„ í•˜ë‚˜ì”© ì ‘ì–´ ë„£ê³ ,
ë‹¬ë‹˜ì´ í† ë‹¥í† ë‹¥â€” â€œì˜ ìë¼, ë‚´ì¼ ë˜ ë°˜ì§!â€
ì•„ê°€ëŠ” í•˜í’ˆ í•œë²ˆ, ëˆˆì„ ê¼­ ê°ì•„ìš”.
í¬ê·¼í¬ê·¼, ë°˜ì§ë°˜ì§, ê¿ˆì´ ì‚´ê¸ˆì‚´ê¸ˆ ì°¾ì•„ì˜µë‹ˆë‹¤.`},
        {
            id: 'momo_train', title: 'ì¹™ì¹™í­í­ ëª¨ëª¨ ê¸°ì°¨', theme: 'ìš°ì •', text: `ì¥ë‚œê° ê¸°ì°¨ ëª¨ëª¨ê°€ â€œì¹™ì¹™â€” í­í­!â€ ì†Œë¦¬ë¥¼ ë‚´ë©° ì¶œë°œí–ˆì–´ìš”.
ê³°ëŒì´ ì—­, í† ë¼ ì—­, ì˜¤ë¦¬ ì—°ëª» ì—­ì— ì°¨ë¡€ì°¨ë¡€ ì„œìš”.
â€œíƒ‘ìŠ¹í•˜ì„¸ìš”!â€ ëª¨ëª¨ê°€ ë§í•˜ì, ì¹œêµ¬ë“¤ì´ â€œê¹¡ì´! ê½¥ê½¥!â€ ì˜¬ë¼íƒ‘ë‹ˆë‹¤.
â€œì†ì¡ê³ , ë§ˆìŒë„ ê½‰!â€ ê¸°ì°¨ê°€ ë‘¥ê·¼ ë°©ì„ í•œ ë°”í€´ ë„ëŠ” ë™ì•ˆ,
ì°½ë°– êµ¬ë¦„ì€ ëª½ê¸€ëª½ê¸€, ë°”ëŒì€ ì†”ì†”â€”
ì¹œêµ¬ë“¤ì€ ì„œë¡œ ì¸ì‚¬í•´ìš”. â€œì•ˆë…•!â€ â€œí•¨ê»˜ ê°€ìš”!â€
ë§ˆì§€ë§‰ ì—­ì€ ì´ë¶ˆ ì‚°ì—­. â€œë„ì°©í–ˆìŠµë‹ˆë‹¤!â€
ëª¨ëª¨ëŠ” ì‚´ì§ ë¸Œë ˆì´í¬. â€œë¼ì´ìµâ€” í‘¹!â€
ì¹œêµ¬ë“¤ì€ í¬ê·¼í•œ ì´ë¶ˆì— ì°©ì„!
ëª¨ëª¨ê°€ ì†ì‚­ì—¬ìš”. â€œê¿ˆë‚˜ë¼ ê¸‰í–‰, ì¶œë°œ!â€ ì¹™ì¹™â€” í­í­â€”.`},
        {
            id: 'yawn_seed', title: 'ì”¨ì•—ì˜ í•˜í’ˆ', theme: 'ì„±ì¥', text: `ì‘ì€ ì”¨ì•— í•˜ë‚˜ê°€ â€œí•˜ì•„â€”â€ í•˜í’ˆì„ í–ˆì–´ìš”.
ë¹—ë°©ìš¸ì´ â€œë˜ë¡ë˜ë¡â€ ì¸ì‚¬ë¥¼ í•˜ê³ , í™ì´ â€œí¬ì˜¥â€ ê°ì‹¸ ì¤ë‹ˆë‹¤.
í•´ë‹˜ì´ â€œë°˜ì§!â€ ì†ì„ í”ë“¤ì, ì”¨ì•—ì€ â€œì‘¥â€” ì‘¥â€”â€ ê¸°ì§€ê°œë¥¼ ì¼œìš”.
ì´ˆë¡ ìì´ â€œì‚´ë‘â€, ì‘ì€ ê½ƒë´‰ì˜¤ë¦¬ê°€ â€œí†¡!â€
â€œì•ˆë…•, ì„¸ìƒ!â€ ì”¨ì•—ì€ ìš©ê¸° ë‚´ì–´ ì¸ì‚¬í–ˆì§€ìš”.
ì§€ë‚˜ê°€ë˜ ë‚˜ë¹„ê°€ ë§í•´ìš”. â€œì²œì²œíˆ, ë„¤ ì†ë„ë¡œ.â€
ë°”ëŒë„ ë§í•´ìš”. â€œí† ë‹¥í† ë‹¥, ë„¤ê°€ ì¢‹ì•„.â€
ì”¨ì•—ì€ ë¯¸ì†Œ ì§€ìœ¼ë©° ì¡°ê¸ˆ ë” ìë¼ìš”.
ì˜¤ëŠ˜ì€ ì í•œ ì¥, ë‚´ì¼ì€ ê½ƒ í•œ ì†¡ì´.
ì‘¥ì‘¥, í† ë‹¥í† ë‹¥â€” ì‘ì€ ì„±ì¥ë„ ì¶©ë¶„íˆ ë©‹ì ¸ìš”.`},
        {
            id: 'umbrella_concert', title: 'ìš°ì‚° ìŒì•…íšŒ', theme: 'ë¹„', text: `ë¹„ê°€ â€œí†¡í†¡â€” í†¡í†¡â€”â€ ì°½ë¬¸ì„ ë‘ë“œë¦¬ì, ìš°ì‚°ë“¤ì´ ëª¨ì˜€ì–´ìš”.
ë¹¨ê°„ ìš°ì‚°ì€ â€œë”©~â€, íŒŒë€ ìš°ì‚°ì€ â€œë™~â€, ë…¸ë€ ìš°ì‚°ì€ â€œë”©ë™!â€
í˜„ê´€ ì• ì‘ì€ ì—°ëª»ì´ ë¬´ëŒ€ê°€ ë˜ì—ˆì§€ìš”.
ì¥í™”ê°€ â€œì²™ì²™â€, ë¬¼ë°©ìš¸ì´ â€œë½€ê¸€ë½€ê¸€â€,
ë¹„ëˆ—ë°©ìš¸ì´ ì‚´ì§ ë– ì˜¤ë¥´ë©° ë°˜ì§ë°˜ì§ ì¡°ëª…ì„ ì¼œìš”.
ìš°ì‚° ì§€íœ˜ìê°€ ë§í•´ìš”. â€œí¬ê²Œâ€” ì‘ê²Œâ€” ì²œì²œíˆâ€”â€
ë¹„ëŠ” ì ì  ì¦ì•„ë“¤ê³ , ë…¸ë˜ëŠ” ì¡°ìš©í•´ì§‘ë‹ˆë‹¤.
ë§ˆì§€ë§‰ í•œ ìŒ, â€œë”©â€”â€.
ëª¨ë‘ê°€ ì†ì‚­ì—¬ìš”. â€œì°¸ ì¢‹ì•˜ë‹¤.â€
ë¹„ê°€ ê·¸ì¹˜ë©´, ë¬´ëŒ€ëŠ” ë§‘ì€ í•˜ëŠ˜ë¡œ ë°”ë€Œì§€ìš”.`},
        {
            id: 'sea_star_pouch', title: 'ë°”ë‹·ë³„ ì£¼ë¨¸ë‹ˆ', theme: 'ë°”ë‹¤', text: `íŒŒë„ëŠ” â€œì°°ë‘â€” ì°°ë‘â€”â€ ë…¸ë˜í•˜ë©° í•´ë³€ì„ ì“¸ì–´ ì¤˜ìš”.
ë‹¬ë¹› ì£¼ë¨¸ë‹ˆ ì†ì—ëŠ” ì¡°ê°œë³„, ëª¨ë˜ë³„, ì‘ì€ ë°”ë‹·ë³„ì´ ë°˜ì§!
ì•„ê¸°ê°€ í•˜ë‚˜ì”© êº¼ë‚´ë©° ì¸ì‚¬í•´ìš”. â€œì•ˆë…•, ë°˜ì§ ì¹œêµ¬ë“¤!â€
ì¡°ê°œë³„ì€ â€œì‚¬ê°ì‚¬ê°â€, ëª¨ë˜ë³„ì€ â€œë³´ë“¤ë³´ë“¤â€.
ë°”ë‹·ë³„ì€ ë§í•´ìš”. â€œìš°ë¦° ë‹¤ í•´ë‹˜ê³¼ ë°”ë‹¤ì˜ ì„ ë¬¼ì´ì•¼.â€
íŒŒë„ê°€ ì†ì‚­ì—¬ìš”. â€œí•„ìš”í•  ë•Œë§Œ êº¼ë‚´ ë³´ê³ , ë‹¤ì‹œ ìš°ë¦¬ì—ê²Œ ëŒë ¤ì¤˜.â€
ì•„ê¸°ëŠ” ë„ë•, ì£¼ë¨¸ë‹ˆë¥¼ ê¼­ ì¥ê³ ëŠ”,
ë³„ë“¤ì„ í•œ ë²ˆ ë” ë°”ë¼ë´…ë‹ˆë‹¤. ë°˜ì§â€”
â€œê³ ë§ˆì›Œ. ë‚´ ë§ˆìŒë„ ë°˜ì§!â€
ë°¤ì´ ê¹Šì–´ì§€ì, ë°”ë‹·ë³„ì´ ê¸¸ì„ ë°í˜€ ì§‘ìœ¼ë¡œ ì•ˆë‚´í•´ìš”.`}];
        const THEMES = ['ì „ì²´', 'ì ìë¦¬', 'ìš°ì •', 'ì„±ì¥', 'ë¹„', 'ë°”ë‹¤'];
        const themeChips = document.getElementById('themeChips');
        const storyList = document.getElementById('storyList');
        const storyTitle = document.getElementById('storyTitle');
        const storyBox = document.getElementById('storyBox');
        const btnStoryInsert = document.getElementById('btnStoryInsert');
        let currentTheme = 'ì „ì²´', currentStory = null;

        function renderThemeChips() {
            themeChips.innerHTML = '';
            THEMES.forEach(t => {
                const b = document.createElement('button');
                b.className = 'pill' + (t === currentTheme ? ' active' : '');
                b.textContent = t;
                b.onclick = () => { currentTheme = t; renderThemeChips(); renderStoryList(); };
                themeChips.appendChild(b);
            });
        }
        function renderStoryList() {
            storyList.innerHTML = '';
            const list = STORIES.filter(s => currentTheme === 'ì „ì²´' || s.theme === currentTheme);
            list.forEach(s => {
                const row = document.createElement('div');
                row.className = 'row';
                row.style.justifyContent = 'space-between';
                row.style.alignItems = 'center';
                row.style.border = '1px solid var(--line)';
                row.style.borderRadius = '10px';
                row.style.padding = '10px 12px';
                const left = document.createElement('div');
                left.innerHTML = `<strong>${s.title}</strong> <span class="muted">Â· ${s.theme}</span>`;
                const right = document.createElement('div');
                const btn = document.createElement('button');
                btn.className = 'btn'; btn.textContent = 'ë³´ê¸°'; btn.onclick = () => showStory(s.id);
                right.appendChild(btn); row.appendChild(left); row.appendChild(right);
                storyList.appendChild(row);
            });
            if (list.length && (!currentStory || !list.find(x => x.id === currentStory.id))) { showStory(list[0].id); }
        }
        function showStory(id) {
            const s = STORIES.find(x => x.id === id); if (!s) return;
            currentStory = s; storyTitle.textContent = s.title; storyBox.textContent = s.text;
        }
        btnStoryInsert.onclick = () => { if (!currentStory) return; textArea.value = currentStory.text; textArea.focus(); };
        renderThemeChips(); renderStoryList();

        // ===== í•©ì„± =====
        const engineSel = document.getElementById('engine');
        const langSel = document.getElementById('language');
        const userIdInput = document.getElementById('userId');
        const btnSynth = document.getElementById('btnSynth');
        const btnClear = document.getElementById('btnClear');
        const player = document.getElementById('player');
        const resp = document.getElementById('resp');

        btnSynth.onclick = async () => {
            const payload = { engine: engineSel.value, language: langSel.value, userId: userIdInput.value.trim(), text: textArea.value.trim() };
            try {
                const r = await fetch('/tts/synthesize', { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(payload) });
                const j = await r.json();
                resp.style.display = 'block'; resp.textContent = JSON.stringify(j, null, 2);
                if (j.audioUrl) { player.src = j.audioUrl; await player.play().catch(() => { }); }
            } catch (e) { resp.style.display = 'block'; resp.textContent = 'í•©ì„± ì˜¤ë¥˜: ' + e.message; }
        };
        btnClear.onclick = () => { textArea.value = ''; player.removeAttribute('src'); resp.style.display = 'none'; resp.textContent = ''; };

        // ===== ì—…ë¡œë“œ =====
        const upUser = document.getElementById('upUser');
        const upFile = document.getElementById('upFile');
        const btnUpload = document.getElementById('btnUpload');
        const upMsg = document.getElementById('upMsg');
        btnUpload.onclick = async () => {
            const uid = (upUser.value || '').trim(); const file = upFile.files[0];
            if (!uid || !file) { upMsg.textContent = 'useridì™€ íŒŒì¼ì„ ì„ íƒí•˜ì„¸ìš”.'; return; }
            const fd = new FormData(); fd.append('userId', uid); fd.append('file', file);
            btnUpload.disabled = true; upMsg.textContent = 'ì—…ë¡œë“œ ì¤‘...';
            try {
                const r = await fetch('/voice-profiles/upload', { method: 'POST', body: fd });
                const j = await r.json();
                upMsg.textContent = j.ok ? 'ì—…ë¡œë“œ ì™„ë£Œ!' : 'ì—…ë¡œë“œ ì‹¤íŒ¨';
                if (j.ok) { userIdInput.value = uid; }
            } catch (e) { upMsg.textContent = 'ì—…ë¡œë“œ ì˜¤ë¥˜: ' + e.message; }
            finally { btnUpload.disabled = false; }
        };
    </script>
    <script>
        (function () {
            // íŒŒì¼ëª…ë§Œ ì¶”ì¶œ (ë£¨íŠ¸ë¡œ ì—´ë¦´ ë•ŒëŠ” index.htmlë¡œ ì²˜ë¦¬)
            const file = (location.pathname.split('/').pop() || 'index.html').toLowerCase();

            // í˜„ì¬ í˜ì´ì§€ íŒë³„
            let current = 'home';
            if (file.includes('tts')) current = 'tts';
            else if (file.includes('growth')) current = 'growth';
            // í•„ìš”ì‹œ ì¶”ê°€: else if (file.includes('community')) current = 'community';

            // data-pageì™€ ì¼ì¹˜í•˜ëŠ” í•­ëª©ë§Œ active
            document.querySelectorAll('.nav a[data-page]').forEach(a => {
                a.classList.toggle('active', a.dataset.page === current);
            });
            // ë¡œê³ (ë¸Œëœë“œ)ì— activeë¥¼ ì£¼ê³  ì‹¶ìœ¼ë©´ ì•„ë˜ ì£¼ì„ í•´ì œ
            // document.querySelectorAll('.brand[data-page]').forEach(a => {
            //   a.classList.toggle('active', a.dataset.page === current);
            // });
        })();
    </script>

</body>

</html>